export default async function createOperationsTable(moduleRegistration) {
	const config = moduleRegistration.getConfiguration('operations');
	const FdtTable = await moduleRegistration.getExportFromModule(
		'@fontoxml/fontoxml-development-tools-module-shared',
		'FdtTable',
	);

	const columns = [
		{
			name: 'name',
			label: 'Name',
			value: (operation) => operation.operationName,
		},
		{
			name: 'file',
			label: 'File',
			value: (operation) => operation.operationFile,
		},
		{
			name: 'label',
			label: 'Label',
			value: (operation) => operation.label,
		},
		{
			name: 'desc',
			label: 'Description',
			value: (operation) => operation.description,
		},
		{
			name: 'key',
			label: 'Key binding',
			value: (operation) => operation.keyBinding,
		},
	];

	return new FdtTable(
		moduleRegistration,
		columns.map((col) =>
			Object.assign(col, {
				default: config.defaultColumns.indexOf(col.name) >= 0,
			})
		)
	);
}
