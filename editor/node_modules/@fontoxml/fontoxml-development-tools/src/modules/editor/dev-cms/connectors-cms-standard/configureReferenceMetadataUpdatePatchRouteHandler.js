import referenceRepository from './referenceRepository.js';

function configureReferenceMetadataUpdatePatchRouteHandler(_config) {
	return (req, res) => {
		const reference = referenceRepository.metadataUpdate(
			req.body.permanentId,
			req.body.metadata
		);

		if (!reference) {
			res.status(404).end();
			return;
		}

		res.status(200)
			.set('content-type', 'application/json; charset=utf-8')
			.json(reference);
	};
}

export default configureReferenceMetadataUpdatePatchRouteHandler;
