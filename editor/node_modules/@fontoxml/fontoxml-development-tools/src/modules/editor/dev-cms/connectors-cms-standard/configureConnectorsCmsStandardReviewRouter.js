import express from 'express';

import configureReviewAnnotationGetPostRouteHandler from './configureReviewAnnotationGetPostRouteHandler.js';
import configureReviewAnnotationPostRouteHandler from './configureReviewAnnotationPostRouteHandler.js';
import configureReviewAnnotationPutRouteHandler from './configureReviewAnnotationPutRouteHandler.js';
import configureReviewAnnotationReplyPostRouteHandler from './configureReviewAnnotationReplyPostRouteHandler.js';
import configureReviewAnnotationReplyPutRouteHandler from './configureReviewAnnotationReplyPutRouteHandler.js';
import configureReviewStatePostRouteHandler from './configureReviewStatePostRouteHandler.js';
import AnnotationDatabase from './review-annotations/AnnotationDatabase.js';
import DebuggingConfiguration from './review-annotations/DebuggingConfiguration.js';

const connectorsCmsStandardReviewRouter = express.Router();

function configureConnectorsCmsStandardReviewRouter(config) {
	const annotationDatabase = new AnnotationDatabase(config);
	const debugConfiguration = new DebuggingConfiguration();

	connectorsCmsStandardReviewRouter
		.route('/connectors/cms/standard/review/annotation')
		.post(
			configureReviewAnnotationPostRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		)
		.put(
			configureReviewAnnotationPutRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		);

	connectorsCmsStandardReviewRouter
		.route('/connectors/cms/standard/review/annotation/get')
		.post(
			configureReviewAnnotationGetPostRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		);

	connectorsCmsStandardReviewRouter
		.route('/connectors/cms/standard/review/annotation/reply')
		.post(
			configureReviewAnnotationReplyPostRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		)
		.put(
			configureReviewAnnotationReplyPutRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		);

	connectorsCmsStandardReviewRouter
		.route('/connectors/cms/standard/review/state')
		.post(
			configureReviewStatePostRouteHandler(
				annotationDatabase,
				debugConfiguration
			)
		);

	return connectorsCmsStandardReviewRouter;
}

export default configureConnectorsCmsStandardReviewRouter;
