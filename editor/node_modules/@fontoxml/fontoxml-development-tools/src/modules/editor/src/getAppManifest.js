import fs from 'fs-extra';
import path from 'path';

import Version from '../../../Version.js';

export default async function getAppManifest(editorPath) {
	const appManifestFilePath = path.join(editorPath, 'manifest.json');
	const appManifest = await fs.readJson(appManifestFilePath);
	appManifest._rawLoaderExtensions = appManifest._rawLoaderExtensions || [];
	appManifest.favicon = appManifest.favicon || 'assets/images/favicon.ico';
	appManifest.name = appManifest.name || 'Fonto Editor';
	appManifest.sdkVersion = new Version(appManifest.sdkVersion);
	appManifest.supportedBrowsers = appManifest.supportedBrowsers || {
		chrome: '124',
		edge: '124',
		firefox: '125',
		safari: '17',
	};
	return appManifest;
}
