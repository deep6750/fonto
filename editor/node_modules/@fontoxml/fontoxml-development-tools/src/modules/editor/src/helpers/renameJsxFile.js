import fs from 'fs-extra';
import path from 'path';

/**
 * Rename a '.jsx.js' file extension to '.jsx'.
 *
 * @param {Object} file
 *
 * @return {Promise}
 */
export default async function renameJsxFile(file) {
	if (!file.filePath.endsWith('.jsx.js')) {
		return file;
	}

	const parsedFilePath = path.parse(file.filePath);
	const newFilePath = path.join(parsedFilePath.dir, parsedFilePath.name);

	await fs.rename(file.filePath, newFilePath);
	file.filePath = newFilePath;

	return file;
}
