import fs from 'fs-extra';
import path from 'path';

export default function getWebpackDevMiddlewareConfig(appConfig) {
	return {
		// Use the actual filesystem for (primary) output opposed to the
		// in-memory one when the write-to-disk option is enabled.
		// https://github.com/webpack/webpack-dev-middleware#outputfilesystem
		outputFileSystem: appConfig.writeToDisk
			? { ...fs, join: path.join.bind(path) }
			: undefined,
	};
}
