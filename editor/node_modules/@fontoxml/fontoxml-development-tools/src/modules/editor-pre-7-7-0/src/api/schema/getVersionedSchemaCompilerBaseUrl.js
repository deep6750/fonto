/** @typedef {import('../../../../../Version').default} Version */

/**
 * Retrieve the URL for the schema compiler for the given Fonto version.
 *
 * @param {Buffer}  fdtLicense License information.
 * @param {Version} sdkVersion The version of Fonto we are compiling for.
 *
 * @return {string}
 */
export default async function getVersionedSchemaCompilerBaseUrl(
	fdtLicense,
	sdkVersion
) {
	const nightlyOrVersion = sdkVersion.isNightly
		? 'nightly'
		: sdkVersion.format();
	const productData = await fdtLicense.getDataForProducts({
		'schema-compiler': {
			hosted: {
				version: nightlyOrVersion,
			},
		},
	});
	return productData.products['schema-compiler'].hosted.uri;
}
