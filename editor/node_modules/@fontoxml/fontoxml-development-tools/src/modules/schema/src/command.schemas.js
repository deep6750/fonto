import path from 'path';

import createSchemasTable from './api/createSchemasTable.js';

export default async (moduleRegistration) => {
	const table = await createSchemasTable(moduleRegistration);

	moduleRegistration
		.registerCommand(
			'schemas',
			path.resolve(
				moduleRegistration.getPath(),
				'src',
				'command.schemas.controller.js',
			),
		)
		.addAlias('list-schemas')
		.setDescription('Output a table with information about all schemas.')

		.setRequiresEditorRepository()
		.setRequiresEditorVersionToMatchFdt()

		.addOption(table.sortOption)
		.addOption(table.columnsOption)
		.addOption(table.exportOption)

		.addExample(
			`${moduleRegistration.getAppInfo().name} schemas`,
			'Output a list of all schemas in the application.'
		);
};
