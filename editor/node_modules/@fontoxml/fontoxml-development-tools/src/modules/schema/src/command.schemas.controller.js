import createSchemasTable from './api/createSchemasTable.js';
import getSchemaSummaries from './api/getSchemaSummaries.js';

export default async function schemasCommand(req, res) {
	res.caption(req.command.getLongName());

	const destroySpinner = res.spinner('Looking up schemas...');

	const schemaSummaries = getSchemaSummaries(req.fdt.editorRepository.path);

	destroySpinner();
	res.break();

	const table = await createSchemasTable(req.command.getModuleRegistration());
	table.print(
		res,
		req.options.columns,
		schemaSummaries,
		req.options.sort,
		req.options.export
	);
}
