import createSimpleTypesTable from './api/createSimpleTypesTable.js';
import getClosestMatchingSchemaSummary from './api/getClosestMatchingSchemaSummary.js';

export default async function simpleTypesCommand(req, res) {
	res.caption(req.command.getLongName());

	const destroySpinner = res.spinner('Looking up schemas...');

	const schemaSummary = getClosestMatchingSchemaSummary(
		req.fdt.editorRepository.path,
		req.options.schema
	);

	destroySpinner();
	res.break();

	const table = await createSimpleTypesTable(
		req.command.getModuleRegistration(),
	);
	table.print(
		res,
		req.options.columns,
		schemaSummary.getAllSimpleTypes(),
		req.options.sort,
		req.options.export
	);
}
