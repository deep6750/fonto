import path from 'path';

export default async function createSchemasTable(moduleRegistration) {
	const FdtTable = await moduleRegistration.getExportFromModule(
		'@fontoxml/fontoxml-development-tools-module-shared',
		'FdtTable',
	);

	return new FdtTable(moduleRegistration, [
		{
			name: 'package',
			default: true,
			label: 'Package',
			value: (schema) => schema.package,
		},
		{
			name: 'locations',
			default: true,
			label: 'Locations',
			value: (schema) => schema.locations.join(', '),
		},
		{
			name: 'path',
			default: true,
			label: 'Path',
			value: (schema) => path.relative('', schema.path),
		},
		{
			name: 'version',
			label: 'Version',
			value: (schema) => schema.getSchemaVersionString(),
		},
	]);
}
