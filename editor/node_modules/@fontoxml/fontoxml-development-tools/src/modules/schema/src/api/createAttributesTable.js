export default async function createAttributesTable(moduleRegistration) {
	const FdtTable = await moduleRegistration.getExportFromModule(
		'@fontoxml/fontoxml-development-tools-module-shared',
		'FdtTable',
	);

	return new FdtTable(moduleRegistration, [
		{
			name: 'name',
			default: true,
			label: 'Name',
			value: (attribute) => attribute.localName,
		},
		{
			name: 'ns',
			default: true,
			label: 'Namespace',
			value: (attribute) => attribute.getNamespace(),
		},
		{
			name: 'use',
			default: true,
			label: 'Use',
			value: (attribute) => attribute.use,
		},
		{
			name: 'defaultvalue',
			default: true,
			label: 'Default value',
			value: (attribute) => attribute.defaultValue,
		},
		{
			name: 'allowedValues',
			label: 'Allowed values',
			value: (attribute) =>
				attribute.allowedValues && attribute.allowedValues.join(', '),
		},
		{
			name: 'typename',
			label: 'Type name',
			value: (attribute) => attribute.typeLocalName,
		},
		{
			name: 'typenamespace',
			label: 'Type namespace',
			value: (attribute) => attribute.typeNamespace,
		},
		{
			name: 'simpletype',
			label: 'Simple type',
			value: (element) => {
				const simpleType = element.getSimpleType();
				return simpleType ? simpleType.getSimpleTypeString() : null;
			},
		},
	]);
}
