export default async function createMessagesTable(moduleRegistration) {
	const FdtTable = await moduleRegistration.getExportFromModule(
		'@fontoxml/fontoxml-development-tools-module-shared',
		'FdtTable',
	);

	return new FdtTable(moduleRegistration, [
		{
			name: 'in',
			default: true,
			label: 'Original',
			value: (messageJson) => messageJson.in,
		},
		{
			name: 'out',
			default: true,
			label: 'Localized',
			value: (messageJson) => messageJson.out,
		},
		{
			name: 'conflicts',
			label: 'Conflicts',
			value: (messageJson) =>
				!messageJson.conflicts
					? null
					: messageJson.conflicts.join('\n'),
		},
		{
			name: 'metadata',
			label: 'Metadata',
			value: (messageJson) =>
				!messageJson.meta
					? null
					: messageJson.meta
							.map((meta) => `${meta.package}/${meta.file}`)
							.join('\n'),
		},
	]);
}
