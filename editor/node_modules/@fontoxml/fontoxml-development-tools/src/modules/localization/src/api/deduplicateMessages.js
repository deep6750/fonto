/**
 * @param  {Message[]}  messages
 *
 * @return  {Message[]}  messages with duplicates merged
 */
export default function deduplicateMessages(messages) {
	const byOriginal = Object.create(null);
	return messages.reduce((deduped, msg) => {
		const other = byOriginal[msg.original];
		if (other) {
			other.merge(msg);
			return deduped;
		}

		byOriginal[msg.original] = msg;
		return deduped.concat([msg]);
	}, []);
}
